#!/usr/bin/env bash


if is_app_installed vim; then
  export VISUAL=vim
  export EDITOR="$VISUAL"

  mkdir -p ~/.vim/undodir
  mkdir -p ~/.vim/spell
  mkdir -p ~/.vim/after/ftplugin

  check_dotfile ~/.vimrc || ln -s $(pwd)/vim/vimrc ~/.vimrc

  ftplugin_dir="vim/after/ftplugin"
  search_dir="$(pwd)/${ftplugin_dir}"

  for cfg in "${search_dir}"/*.vim
  do
    check_dotfile ~/."${ftplugin_dir}"/"$(basename $cfg)" || ln -s "${cfg}" ~/."${ftplugin_dir}"/"$(basename $cfg)"
  done
  
  check_dotfile ~/.vim/coc-settings.json || ln -s $(pwd)/vim/coc-settings.json ~/.vim/coc-settings.json
  check_dotfile ~/.vim/spell/en.utf-8.add || ln -s $(pwd)/vim/spell/en.utf-8.add ~/.vim/spell/en.utf-8.add
fi
