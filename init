#!/usr/bin/env bash

# load misc
INIT_HOME=$HOME/scripts
cd $INIT_HOME
source misc

scripts=(`find . -mindepth 2 -not -path "./.git/*" -perm /u+x -type f`)
[[ -n $DEBUG ]] && debug "scripts: ${scripts[@]}"

for script in "${scripts[@]}"; do
  if [[ "$script" =~ ^.*/init$ ]]; then
    [[ -n $DEBUG ]] && debug "loading: ${script}"
    source ${script}
    continue
  fi
  path=$(dirname $(realpath "${script}"))
  if [[ "$PATH" != *${path}* ]]; then
    PATH=${PATH}:${path}
    [[ -n $DEBUG ]] && debug "\$PATH:${path}"
  fi
  export PATH
done
cd - >&1 >/dev/null
